---
layout: post
title:  "Redis 笔记-基础"
categories: Redis
---
##数据类型  
####字符串  
  当字符串长度小于1M时，扩容时加倍现有空间，如果超过1M，扩容时一次只会扩1M空间。字符串最大长度512M。  
  可批量对多个字符串读写，节省网络耗时开销。  
  如果value值是整数，可自增操作，范围是signed long的最大值和最小值。  
####列表  
  是链表结构，当列表弹出最后一个元素后，该结构自动删除，内存被回收。  
  右进左出-队列；右进右出-栈；  
####哈希  
  内部结构是数组+链表二维结构，第一维hash的数组位置碰撞时，就会将碰撞的元素用链表串起来。  
  碰撞时采用渐进式rehash策略：在rehash同时，保留新旧两个hash结构，查询时会同时查询两个hash结构，然后在后续定时任务及hash操作指令中，循序渐进的将旧hash内容迁移到新hash中。最终使用新hash结构内容。  
####zset  
  类似java的sortedSet和HashMap的结合体，一方面试set，另一方面为每个value赋予一个score，代表这个value的权重，内部实现使用跳跃列表的数据结构。  
  最下面一层所有的元素都会串起来。然后每隔几个元素挑选出一个代表来，再将这几个代表使用另外一级指针串起来。然后在这些代表里再挑出二级代表，再串起来。最终就形成了金字塔结构。  
  ![跳跃列表](http://p9hbnobnq.bkt.clouddn.com/跳跃列表.png)
    
 比如上图中间的这个元素，同时处于 L0、L1 和 L2 层，可以快速在不同层次之间进行「跳跃」。  
定位插入点时，先在顶层进行定位，然后下潜到下一级定位，一直下潜到最底层找到合适的位置，将新元素插进去。...

